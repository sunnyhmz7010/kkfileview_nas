<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>File List</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        ul {
            list-style-type: none;
            padding-left: 20px;
        }
        li {
            padding: 5px;
            cursor: pointer;
        }
        li.folder::before {
            content: "üìÅ ";
        }
        li.file::before {
            content: "üìÑ ";
        }
        li a {
            text-decoration: none;
            color: #007bff;
        }
        li a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>File List</h1>
    <ul id="fileList">
        {% for name, content in file_structure.items() %}
            {% if content is mapping %}
                <li class="folder" onclick="toggleFolder(this)">
                    {{ name }}
                    <ul style="display: none;">
                        {% for sub_name, sub_content in content.items() %}
                            {% if sub_content is mapping %}
                                <li class="folder" onclick="toggleFolder(this)">
                                    {{ sub_name }}
                                    <ul style="display: none;">
                                        {% for file_name, file_path in sub_content.items() %}
                                            <li class="file">
                                                {{ file_name }}
                                                <a href="{{ generate_preview_url(file_path) }}" target="_blank">È¢ÑËßà</a>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </li>
                            {% else %}
                                <li class="file">
                                    {{ sub_name }}
                                    <a href="{{ generate_preview_url(sub_content) }}" target="_blank">È¢ÑËßà</a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </li>
            {% else %}
                <li class="file">
                    {{ name }}
                    <a href="{{ generate_preview_url(content) }}" target="_blank">È¢ÑËßà</a>
                </li>
            {% endif %}
        {% endfor %}
    </ul>

    <script>
        // ÂàáÊç¢Êñá‰ª∂Â§πÁöÑÂ±ïÂºÄÂíåÊî∂Ëµ∑
        function toggleFolder(element) {
            const subList = element.querySelector('ul');
            if (subList) {
                subList.style.display = subList.style.display === 'none' ? 'block' : 'none';
            }
        }
    </script>
</body>
</html>